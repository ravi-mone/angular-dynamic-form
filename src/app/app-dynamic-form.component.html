<div class="container mx-auto mt-10 max-w-md">
  <form
    [formGroup]="userRegistrationForm"
    (ngSubmit)="onSubmit()"
    class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4"
  >
    <div *ngFor="let field of fieldsConfig" class="mb-4">
      <label
        [for]="field.name"
        class="block text-gray-700 text-sm font-bold mb-2"
        >{{ field.label }}</label
      >
      <ng-container [ngSwitch]="field.type">
        <input
          *ngSwitchCase="'text'"
          [id]="field.name"
          [type]="field.type"
          [formControlName]="field.name"
          class="control"
        />

        <!-- Add more form controls -->
        <input
          *ngSwitchCase="'email'"
          [id]="field.name"
          [type]="field.type"
          [formControlName]="field.name"
          class="control"
        />
        <input
          *ngSwitchCase="'password'"
          [id]="field.name"
          [type]="field.type"
          [formControlName]="field.name"
          class="control"
        />
        <input
          *ngSwitchCase="'date'"
          [id]="field.name"
          [type]="field.type"
          [formControlName]="field.name"
          class="control"
        />
        <input
          *ngSwitchCase="'number'"
          [id]="field.name"
          [type]="field.type"
          [formControlName]="field.name"
          class="control"
        />
        <input
          *ngSwitchCase="'file'"
          [id]="field.name"
          [type]="field.type"
          [formControlName]="field.name"
          class="control"
        />
        <textarea
          *ngSwitchCase="'textarea'"
          [id]="field.name"
          [formControlName]="field.name"
          class="control"
          rows="4"
        ></textarea>
        <select
          *ngSwitchCase="'select'"
          [id]="field.name"
          [formControlName]="field.name"
          class="control"
        >
          <option *ngFor="let option of field.options" [value]="option.value">
            {{ option.label }}
          </option>
        </select>
        <ng-container *ngSwitchCase="'checkbox'">
          <input
            [id]="field.name"
            [type]="field.type"
            [formControlName]="field.name"
            class="mt-1"
          />
          <label [for]="field.name" class="ml-2 text-gray-700 text-sm">{{
            field.checkboxLabel
          }}</label>
        </ng-container>
        <ng-container *ngSwitchCase="'radio'">
          <div *ngFor="let option of field.options" class="flex items-center">
            <input
              [id]="option.value"
              [type]="field.type"
              [formControlName]="field.name"
              [value]="option.value"
              class="mt-1"
            />
            <label [for]="option.value" class="ml-2 text-gray-700 text-sm">{{
              option.label
            }}</label>
          </div>
        </ng-container>
      </ng-container>
      <div
        *ngIf="
          userRegistrationForm.get(field.name)?.invalid &&
          (userRegistrationForm.get(field.name)?.dirty ||
            userRegistrationForm.get(field.name)?.touched)
        "
        class="text-red-500 text-xs italic"
      >
        <ng-container [ngSwitch]="field.type">
          <!-- type text-->
          <ng-container *ngSwitchCase="'text'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['minlength']"
            >
              Minimum length is
              {{
                userRegistrationForm.get(field.name)?.errors?.['minlength']
                  .requiredLength




              }}.
            </span>
          </ng-container>
          <!---->

          <!--email-->
          <ng-container *ngSwitchCase="'email'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['pattern']"
              >Please enter a valid email.</span
            >
          </ng-container>
          <!---->

          <!--password-->
          <ng-container *ngSwitchCase="'password'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['minlength']"
            >
              Minimum length is
              {{
                userRegistrationForm.get(field.name)?.errors?.['minlength']
                  .requiredLength














              }}.
            </span>
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['pattern']"
            >
              Password must have at least one uppercase, one lowercase, one
              number and one special character.
            </span>
          </ng-container>
          <!---->

          <!--number-->
          <ng-container *ngSwitchCase="'number'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
            <span *ngIf="userRegistrationForm.get(field.name)?.errors?.['min']">
              Minimum value is
              {{ userRegistrationForm.get(field.name)?.errors?.['min'].min }}.
            </span>
            <span *ngIf="userRegistrationForm.get(field.name)?.errors?.['max']">
              Maximum value is
              {{ userRegistrationForm.get(field.name)?.errors?.['max'].max }}.
            </span>
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['pattern']"
              >Only numbers are allowed.</span
            >
          </ng-container>
          <!---->

          <!--checkbox-->
          <ng-container *ngSwitchCase="'checkbox'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >You must accept the terms.</span
            >
          </ng-container>
          <!---->

          <!--date-->
          <ng-container *ngSwitchCase="'date'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
          </ng-container>

          <!---->

          <!--select-->
          <ng-container *ngSwitchCase="'select'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >Please select an option.</span
            >
          </ng-container>

          <!---->

          <!--select-->
          <ng-container *ngSwitchCase="'textarea'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['maxlength']"
            >
              Maximum length is
              {{
                userRegistrationForm.get(field.name)?.errors?.['maxlength']
                  .requiredLength














              }}.
            </span>
          </ng-container>
          <!---->

          <!--radio-->
          <ng-container *ngSwitchCase="'radio'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >Please select an option.</span
            >
          </ng-container>
          <!---->

          <!--confirmPassword-->
          <ng-container *ngSwitchCase="'confirmPassword'">
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
            <span
              *ngIf="
                userRegistrationForm.get(field.name)?.errors?.['passwordMismatch']
              "
            >
              Password and confirm password do not match.
            </span>
          </ng-container>
          <!---->

          <!--ngSwitchDefault-->
          <ng-container *ngSwitchDefault>
            <span
              *ngIf="userRegistrationForm.get(field.name)?.errors?.['required']"
              >This field is required.</span
            >
          </ng-container>
          <!---->
        </ng-container>
      </div>
    </div>
    <div class="flex items-center justify-between">
      <button
        type="submit"
        [disabled]="userRegistrationForm.invalid"
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"
      >
        Register
      </button>
    </div>
  </form>
</div>
<ng-template #textField let-field="field" let-formGroup="formGroup">
  <app-text-field
    [label]="field.label"
    [controlName]="field.name"
    [formGroup]="formGroup"
  ></app-text-field>
</ng-template>
